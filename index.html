<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dutroux Sellüî•</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    .modal {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    .modal.hidden {
      display: none;
    }
    .modal-content {
      background: #1e1e1e;
      color: #fff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.6);
      max-width: 400px;
      width: 90%;
      font-family: 'Arial', sans-serif;
      position: relative;
    }
    .modal-content h2, .modal-content h3 {
      margin-top: 0;
      color: #ffcc00;
    }
    .modal-content button {
      background-color: #ffcc00;
      color: #000;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
    }
    .modal-content button:hover {
      background-color: #e6b800;
    }
    .modal-content input {
      background: #2e2e2e;
      border: 1px solid #555;
      color: #fff;
      padding: 8px;
      border-radius: 6px;
    }
    .close-btn {
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 24px;
      cursor: pointer;
      color: #fff;
    }
    #orderModal ul {
      padding-left: 20px;
    }
  </style>
  <script src="https://telegram.org/js/telegram-web-app.js"></script> <!-- –í–ê–ñ–ù–û –¥–ª—è Telegram WebApp -->
</head>
<body>
  <div class="header"><h1>Dutroux Sell üî•</h1></div>
  <div class="divider-horizontal"></div>

  <!-- –ë–µ–≥—É—â–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
  <div class="category-marquee">
    <div class="category-track">
      <button class="category">–ü—Ä–∏–≤–∞—Ç–∫–∞ üí∏</button>
      <button class="category">–ü—Ä–µ–≤—å—é üöÄ</button>
      <button class="category">–ü—Ä–∏–≤–∞—Ç–∫–∞ üí∏</button>
      <button class="category">–ü—Ä–µ–≤—å—é üöÄ</button>
      <button class="category">–ü—Ä–∏–≤–∞—Ç–∫–∞ üí∏</button>
      <button class="category">–ü—Ä–µ–≤—å—é üöÄ</button>
      <button class="category">–ü—Ä–∏–≤–∞—Ç–∫–∞ üí∏</button>
      <button class="category">–ü—Ä–µ–≤—å—é üöÄ</button>
    </div>
  </div>
 <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
  <div class="tab-content">
    <!-- –ö–ê–¢–ê–õ–û–ì -->
    <div id="catalog" class="tab-pane active">
      <div class="catalog-header">
        <div class="bar"></div>
        <div class="title">–¢–æ–≤–∞—Ä—ã</div>
      </div>

      <!-- –¢–û–í–ê–†–´ -->
      <div class="product-card" data-name="–ü—Ä–µ–≤—å—é" data-price="200" data-image="preview.png" data-desc="–ö—Ä–∞—Å–æ—á–Ω–æ–µ –ø—Ä–µ–≤—å—é –¥–ª—è –í–∞—à–µ–≥–æ –∫–∞–Ω–∞–ª–∞">
        <img src="preview.png" alt="Preview">
        <div class="product-info">
          <div class="product-title">–ü—Ä–µ–≤—å—é</div>
          <div class="product-description">–ö—Ä–∞—Å–æ—á–Ω–æ–µ –ø—Ä–µ–≤—å—é –¥–ª—è –í–∞—à–µ–≥–æ –∫–∞–Ω–∞–ª–∞</div>
          <div class="product-price">200 ‚ÇΩ</div>
          <button class="details-btn">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
          <button class="add-btn">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
          <div class="reviews">
            <div class="review">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –í—Å—ë –æ—Ç–ª–∏—á–Ω–æ, –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ!</div>
            <div class="review">–ê–Ω–æ–Ω–∏–º: –ë—ã—Å—Ç—Ä–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞, —Ä–µ–∫–æ–º–µ–Ω–¥—É—é.</div>
          </div>
        </div>
      </div>

      <div class="product-card" data-name="–ü—Ä–∏–≤–∞—Ç–∫–∞" data-price="300" data-image="privatka.png" data-desc="–î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–≤–∞—Ç–Ω–æ–º—É –∫–æ–Ω—Ç–µ–Ω—Ç—É –¥–ª—è –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤">
        <img src="privatka.png" alt="–ü—Ä–∏–≤–∞—Ç–∫–∞">
        <div class="product-info">
          <div class="product-title">–ü—Ä–∏–≤–∞—Ç–∫–∞</div>
          <div class="product-description">–î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–≤–∞—Ç–Ω–æ–º—É –∫–æ–Ω—Ç–µ–Ω—Ç—É –¥–ª—è –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤</div>
          <div class="product-price">300 ‚ÇΩ</div>
          <button class="details-btn">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
          <button class="add-btn">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
          <div class="reviews">
            <div class="review">–ö–ª–∏–µ–Ω—Ç: –ö–æ–Ω—Ç–µ–Ω—Ç üî•, —Å–ø–∞—Å–∏–±–æ!</div>
            <div class="review">–ê–ø–æ–Ω: –í—Å—ë —á—ë—Ç–∫–æ, –ø–æ–ª—É—á–∏–ª —Å—Ä–∞–∑—É!</div>
          </div>
        </div>
      </div>
    </div>

    <!-- –ú–û–î–ê–õ–ö–ê "–ü–û–î–†–û–ë–ù–ï–ï" -->
    <div id="modal" class="modal hidden">
      <div class="modal-content">
        <span class="close-btn" id="detailsCloseBtn">&times;</span>
        <img id="modal-img" src="" alt="" style="max-width: 100%; border-radius: 8px; margin-bottom: 10px;">
        <h2 id="modal-title"></h2>
        <p id="modal-desc"></p>
        <div class="modal-price" id="modal-price"></div>
        <button id="modal-add">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
      </div>
    </div>

    <!-- –ö–û–†–ó–ò–ù–ê -->
    <div id="cart" class="tab-pane">
      <div class="cart-header">
        <button class="back-btn" onclick="goToTab('catalog')">‚Üê –ù–∞–∑–∞–¥</button>
        <div class="title">–ö–æ—Ä–∑–∏–Ω–∞</div>
        <div class="total" id="total">0,00 ‚ÇΩ</div>
      </div>
      <div class="cart-body" id="cart-body">–ó–¥–µ—Å—å –±—É–¥—É—Ç –≤–∞—à–∏ —Ç–æ–≤–∞—Ä—ã.</div>
      <button class="checkout-btn" id="checkout-btn" style="display: none;">–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—é</button>
    </div>

    <!-- –ü–†–û–§–ò–õ–¨ -->
    <div id="profile" class="tab-pane">
      <div class="profile-info">
        <img src="avatar.png" alt="Avatar" id="user-avatar">
        <div>
          <strong id="user-name">–ò–º—è –§–∞–º–∏–ª–∏—è</strong><br>
          <span id="user-username">@username</span><br>
          ID: <span id="user-id">123456</span>
        </div>
      </div>

      <div class="promocode-card styled-card">
        <div>–ü—Ä–æ–º–æ–∫–æ–¥:</div>
        <input type="text" id="promo-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥">
        <button id="promo-btn">–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å</button>
        <div id="promo-message" class="promo-error"></div>
      </div>
    </div>
  </div>
 <!-- –ù–ê–í–ò–ì–ê–¶–ò–Ø -->
  <div class="bottom-nav">
    <button class="active" data-tab="catalog"><img src="home.svg" alt=""><span>–ö–∞—Ç–∞–ª–æ–≥</span></button>
    <button data-tab="cart"><img src="cart.svg" alt=""><span>–ö–æ—Ä–∑–∏–Ω–∞</span></button>
    <button data-tab="profile"><img src="profile.svg" alt=""><span>–ü—Ä–æ—Ñ–∏–ª—å</span></button>
  </div>

  <!-- –ú–û–î–ê–õ–ö–ê –û–§–û–†–ú–õ–ï–ù–ò–Ø –ó–ê–ö–ê–ó–ê -->
  <div id="orderModal" class="modal hidden">
    <div class="modal-content">
      <span id="orderCloseBtn" class="close-btn">&times;</span>
      <h2>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h2>
      <p>–ö –æ–ø–ª–∞—Ç–µ: <strong id="orderAmount">0 ‚ÇΩ</strong></p>
      <p>–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ä—Ç—É –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞:</p>
      <ul>
        <li>–¢–∏–Ω—å–∫–æ—Ñ—Ñ: <strong>2200701969378618</strong></li>
        <li>–°–±–µ—Ä–±–∞–Ω–∫: <strong>2202208282306746</strong></li>
      </ul>
      <p>–ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –≤ Telegram –Ω–∞ <strong>@Velik09845</strong></p>
      <div style="margin-top: 20px;">
        <button id="paidButton">–Ø –æ–ø–ª–∞—Ç–∏–ª</button>
        <button id="orderCloseButton">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- –ú–û–î–ê–õ–ö–ê –í–í–û–î–ê USERNAME -->
  <div id="usernameModal" class="modal hidden">
    <div class="modal-content">
      <span id="usernameCloseBtn" class="close-btn">&times;</span>
      <h3>–£–∫–∞–∂–∏—Ç–µ –≤–∞—à Telegram username</h3>
      <p>–≠—Ç–æ –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã –º—ã –º–æ–≥–ª–∏ –Ω–∞–π—Ç–∏ –≤–∞—à –ø–ª–∞—Ç—ë–∂ –∏ –≤—ã—Å–ª–∞—Ç—å —Ç–æ–≤–∞—Ä.</p>
      <input type="text" id="tgUsernameInput" placeholder="@username" style="width: 100%; margin-top: 10px;">
      <div style="margin-top: 15px;">
        <button id="submitUsername">–û–ö</button>
      </div>
    </div>
  </div>

  <script>
    const navButtons = document.querySelectorAll('.bottom-nav button');
    const tabs = document.querySelectorAll('.tab-pane');
    const totalText = document.getElementById('total');
    const cartBody = document.getElementById('cart-body');
    const modal = document.getElementById('modal');
    const checkoutBtn = document.getElementById('checkout-btn');

    const orderModal = document.getElementById('orderModal');
    const orderCloseBtn = document.getElementById('orderCloseBtn');
    const orderCloseButton = document.getElementById('orderCloseButton');
    const orderAmount = document.getElementById('orderAmount');

    const paidButton = document.getElementById('paidButton');
    const usernameModal = document.getElementById('usernameModal');
    const usernameCloseBtn = document.getElementById('usernameCloseBtn');
    const submitUsername = document.getElementById('submitUsername');
    const tgUsernameInput = document.getElementById('tgUsernameInput');

    let cart = {}, total = 0;

    function goToTab(id) {
      navButtons.forEach(b => b.classList.remove('active'));
      tabs.forEach(t => t.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      document.querySelector(`[data-tab="${id}"]`)?.classList.add('active');
    }

    document.querySelectorAll('.add-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        const card = btn.closest('.product-card');
        addToCart(card.dataset.name, +card.dataset.price, card.dataset.image);
      });
    });

    document.querySelectorAll('.details-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        const card = btn.closest('.product-card');
        document.getElementById('modal-img').src = card.dataset.image;
        document.getElementById('modal-title').textContent = card.dataset.name;
        document.getElementById('modal-desc').textContent = card.dataset.desc;
        document.getElementById('modal-price').textContent = card.dataset.price + ' ‚ÇΩ';
        modal.classList.remove('hidden');
        document.getElementById('modal-add').onclick = () => {
          addToCart(card.dataset.name, +card.dataset.price, card.dataset.image);
          modal.classList.add('hidden');
        };
      });
    });

    document.getElementById('detailsCloseBtn').onclick = () => modal.classList.add('hidden');

    window.onclick = e => {
      if (e.target === modal) modal.classList.add('hidden');
      if (e.target === orderModal) orderModal.classList.add('hidden');
      if (e.target === usernameModal) usernameModal.classList.add('hidden');
    };

    function updateCartDisplay() {
      cartBody.innerHTML = '';
      if (!Object.keys(cart).length) {
        cartBody.textContent = '–ó–¥–µ—Å—å –±—É–¥—É—Ç –≤–∞—à–∏ —Ç–æ–≤–∞—Ä—ã.';
        totalText.textContent = '0,00 ‚ÇΩ';
        checkoutBtn.style.display = 'none';
        return;
      }

      Object.values(cart).forEach(item => {
        let div = document.createElement('div');
        div.className = 'product-card';
        div.innerHTML = `
          <img src="${item.image}" alt="">
          <div class="product-info">
            <div class="product-title">${item.name}</div>
            <div class="product-price">${item.price} ‚ÇΩ √ó ${item.count}</div>
            <div class="cart-controls">
              <button onclick="decrementItem('${item.name}')">‚àí</button>
              <button onclick="incrementItem('${item.name}')">+</button>
            </div>
          </div>`;
        cartBody.appendChild(div);
      });

      totalText.textContent = total.toFixed(2) + ' ‚ÇΩ';
      checkoutBtn.style.display = 'block';
    }

    function addToCart(name, price, image) {
      if (!cart[name]) cart[name] = { name, price, image, count: 0 };
      cart[name].count++;
      total += price;
      updateCartDisplay();
    }

    function incrementItem(name) {
      cart[name].count++;
      total += cart[name].price;
      updateCartDisplay();
    }

    function decrementItem(name) {
      if (!cart[name]) return;
      cart[name].count--;
      total -= cart[name].price;
      if (cart[name].count <= 0) delete cart[name];
      updateCartDisplay();
    }

    navButtons.forEach(btn => btn.addEventListener('click', () => goToTab(btn.dataset.tab)));

    document.getElementById('promo-btn').onclick = () => {
      const message = document.getElementById('promo-message');
      message.textContent = '–¢–∞–∫–æ–≥–æ –ø—Ä–æ–º–æ–∫–æ–¥–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç';
      message.style.color = 'red';
    };

    checkoutBtn.onclick = () => {
      if (total === 0) return;
      orderAmount.textContent = total.toFixed(2) + ' ‚ÇΩ';
      orderModal.classList.remove('hidden');
    };

    orderCloseBtn.onclick = () => orderModal.classList.add('hidden');
    orderCloseButton.onclick = () => orderModal.classList.add('hidden');

    paidButton.onclick = () => {
      orderModal.classList.add('hidden');
      usernameModal.classList.remove('hidden');
    };

    usernameCloseBtn.onclick = () => usernameModal.classList.add('hidden');

    submitUsername.onclick = () => {
      const username = tgUsernameInput.value.trim();
      if (!username || !username.startsWith('@')) {
        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π username Telegram, –Ω–∞—á–∏–Ω–∞—é—â–∏–π—Å—è —Å "@"');
        return;
      }
      usernameModal.classList.add('hidden');
      alert('–°–ø–∞—Å–∏–±–æ! –ú—ã —Å–∫–æ—Ä–æ —Å –≤–∞–º–∏ —Å–≤—è–∂–µ–º—Å—è –≤ Telegram.');
    };

    // WebApp –ø—Ä–æ—Ñ–∏–ª—å
    window.addEventListener('DOMContentLoaded', () => {
      if (window.Telegram && Telegram.WebApp) {
        Telegram.WebApp.ready();
        const user = Telegram.WebApp.initDataUnsafe?.user;

        if (user) {
          document.getElementById('user-name').textContent = `${user.first_name} ${user.last_name || ''}`.trim();
          document.getElementById('user-username').textContent = user.username ? `@${user.username}` : '–±–µ–∑ –Ω–∏–∫–∞';
          document.getElementById('user-id').textContent = user.id;

          if (user.username) {
            document.getElementById('user-avatar').src = `https://t.me/i/userpic/320/${user.username}.jpg`;
          }
        }
      }

      updateCartDisplay();
    });
  </script>
</body>
</html>
